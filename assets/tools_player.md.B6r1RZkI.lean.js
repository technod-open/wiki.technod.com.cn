import{_ as g,p,v as h,c as x,o as _,j as t,af as u,ag as w,a as c,ah as P}from"./chunks/framework.BGjk28iD.js";const T={class:"player-content"},b={class:"nav-tab",style:{display:"flex",width:"94%"}},S={style:{flex:"0.4","padding-top":"10px","padding-bottom":"10px","padding-right":"10px"}},j={style:{flex:"1",padding:"10px"}},D=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"page"},"headers":[],"relativePath":"tools/player.md","filePath":"tools/player.md"}'),H={name:"tools/player.md"},M=Object.assign(H,{setup(k){const s=p("https://dcdn.nodjoy.com/demo/index.m3u8"),r=p("m3u8"),n=p("https://cdn.nodjoy.com/images/5cf8c5d9c57b510947.png"),y=()=>{alert("如果播放地址是http协议，请访问http://wiki.nodjoy.com/tools/player.html")},m=()=>{if(!s.value||!s.value.startsWith("http")){alert("请输入有效的播放地址");return}const o=document.getElementById("dplayer");o&&o.remove();const e=document.createElement("div");e.id="dplayer",document.querySelector(".player-content").appendChild(e),document.querySelector(".player-content  #dplayer").style.width="94%",document.querySelector(".player-content  #dplayer").style.margin="0 auto",setTimeout(()=>{i(!0)},1e3)},v=()=>!!s.value.includes("live"),f=(o,e)=>{switch(e){case"mp4":return{url:o,pic:n.value,type:"video/mp4"};case"m3u8":return{url:o,pic:n.value,type:"customHls",customType:{customHls:function(l,d){const a=new Hls;a.loadSource(l.src),a.attachMedia(l)}}};case"live-m3u8":return{url:o,pic:n.value,type:"customHls",live:!0,customType:{customHls:function(l,d){const a=new Hls;a.loadSource(l.src),a.attachMedia(l)}}};case"live-flv":return{url:o,pic:n.value,type:"customFlv",customType:{customFlv:function(l,d){const a=flvjs.createPlayer({type:"flv",url:l.src});a.attachMediaElement(l),a.load()}}}}},i=o=>{const e=new DPlayer({container:document.getElementById("dplayer"),live:v(),video:f(s.value,r.value)});o&&e.play()};return h(()=>{try{DPlayer&&i()}catch{setTimeout(()=>{DPlayer&&i()},1e3)}}),(o,e)=>(_(),x("div",null,[t("div",T,[t("div",b,[t("div",S,[e[3]||(e[3]=t("label",null,"选择播放类型：",-1)),u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),style:{cursor:"pointer"}},[...e[2]||(e[2]=[t("option",{value:"m3u8"},"m3u8",-1),t("option",{value:"mp4"},"mp4/mov",-1),t("option",{value:"live-m3u8"},"直播流-m3u8",-1),t("option",{value:"live-flv"},"直播流-flv",-1)])],512),[[w,r.value]])]),t("div",j,[t("label",null,[e[4]||(e[4]=c("播放地址",-1)),t("span",{onClick:y,style:{cursor:"pointer"}},"ℹ️"),e[5]||(e[5]=c("：",-1))]),u(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>s.value=l),style:{width:"80%"}},null,512),[[P,s.value]])]),t("div",{style:{flex:"0.4",padding:"10px"}},[t("button",{onClick:m},"点击播放")])]),e[6]||(e[6]=t("div",{id:"dplayer"},null,-1))])]))}}),E=g(M,[["__scopeId","data-v-e57409ce"]]);export{D as __pageData,E as default};
