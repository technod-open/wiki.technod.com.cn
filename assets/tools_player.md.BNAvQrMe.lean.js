import{_ as w,u as T,h as P,p as u,v as S,c as _,o as b,j as t,af as d,ag as q,a as m,ah as H}from"./chunks/framework.BGjk28iD.js";const V={class:"player-content"},B={class:"nav-tab",style:{display:"flex",width:"94%"}},C={style:{flex:"0.4","padding-top":"10px","padding-bottom":"10px","padding-right":"10px"}},E={style:{flex:"1",padding:"10px"}},k=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"page"},"headers":[],"relativePath":"tools/player.md","filePath":"tools/player.md"}'),M={name:"tools/player.md"},j=Object.assign(M,{setup(D){const{page:y}=T(),v=P(()=>y.value.relativePath),n=u("https://r2.nodjoy.cn/demo/index.m3u8"),i=u("m3u8"),r=u("https://cdn.nodjoy.com/images/5cf8c5d9c57b510947.png"),f=()=>{alert("如果播放地址是http协议，请访问http://wiki.nodjoy.com/tools/player.html")},h=()=>{if(!n.value||!(n.value.startsWith("https://")||n.value.startsWith("http://"))){alert("请输入有效的播放地址");return}const o=document.getElementById("dplayer");o&&o.remove();const e=document.createElement("div");e.id="dplayer",document.querySelector(".player-content").appendChild(e),document.querySelector(".player-content  #dplayer").style.width="94%",document.querySelector(".player-content  #dplayer").style.margin="0 auto",setTimeout(()=>{p(!0)},1e3);const l=document.getElementById("vcomments");l&&l.remove();const s=document.createElement("div");s.id="vcomments",document.querySelector(".player-content").appendChild(s),document.querySelector(".player-content  #vcomments").style.width="94%",document.querySelector(".player-content  #vcomments").style.margin="0 auto",document.querySelector(".player-content  #vcomments").style.marginTop="20px",setTimeout(()=>{c()},500)},g=()=>!!n.value.includes("live"),x=(o,e)=>{switch(e){case"mp4":return{url:o,pic:r.value,type:"video/mp4"};case"m3u8":return{url:o,pic:r.value,type:"customHls",customType:{customHls:function(l,s){const a=new Hls;a.loadSource(l.src),a.attachMedia(l)}}};case"live-m3u8":return{url:o,pic:r.value,type:"customHls",live:!0,customType:{customHls:function(l,s){const a=new Hls;a.loadSource(l.src),a.attachMedia(l)}}};case"live-flv":return{url:o,pic:r.value,type:"customFlv",customType:{customFlv:function(l,s){const a=flvjs.createPlayer({type:"flv",url:l.src});a.attachMediaElement(l),a.load()}}}}},p=o=>{const e=new DPlayer({container:document.getElementById("dplayer"),live:g(),video:x(n.value,i.value)});o&&e.play()},c=async()=>{typeof Valine<"u"&&new Valine({el:"#vcomments",appId:"9iOmqWQl7wQBsarOb3o2m0eO-gzGzoHsz",appKey:"U2cCMaQisH6I3GsyClKuvrwK",path:v.value,avatar:"wavatar",avatar_cdn:"https://cravatar.cn/avatar/",visitor:!0})};return S(()=>{try{DPlayer&&p()}catch{setTimeout(()=>{DPlayer&&p()},1e3)}setTimeout(()=>{c()},1e3)}),(o,e)=>(b(),_("div",null,[t("div",V,[t("div",B,[t("div",C,[e[3]||(e[3]=t("label",null,"选择播放类型：",-1)),d(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),style:{cursor:"pointer"}},[...e[2]||(e[2]=[t("option",{value:"m3u8"},"m3u8",-1),t("option",{value:"mp4"},"mp4/mp3",-1),t("option",{value:"live-m3u8"},"直播流-m3u8",-1),t("option",{value:"live-flv"},"直播流-flv",-1)])],512),[[q,i.value]])]),t("div",E,[t("label",null,[e[4]||(e[4]=m("播放地址",-1)),t("span",{onClick:f,style:{cursor:"pointer"}},"ℹ️"),e[5]||(e[5]=m("：",-1))]),d(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>n.value=l),style:{width:"80%"}},null,512),[[H,n.value]])]),t("div",{style:{flex:"0.4",padding:"10px"}},[t("button",{onClick:h},"点击播放")])]),e[6]||(e[6]=t("div",{id:"dplayer"},null,-1)),e[7]||(e[7]=t("div",{id:"vcomments"},null,-1))])]))}}),O=w(j,[["__scopeId","data-v-2e9a44bf"]]);export{k as __pageData,O as default};
